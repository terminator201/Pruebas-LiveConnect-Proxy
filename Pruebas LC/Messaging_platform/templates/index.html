<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>LiveConnect Inbox</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">

</head>
<body>

<!-- Botón Configuración dentro del header -->
  <div id="configButton">
    <button type="button" data-action="openSettings" title="Configuracion">⚙</button>
  </div>

  <!-- Modal Configuración -->
  <div id="settingsPanel">
    <div id="settingsCard">

      <h2>Configuración Proxy</h2>

      <h3>Webhook</h3>
      <label for="channelSelect">Canales disponibles</label>
      <select id="channelSelect">
        <option value="">Sin cargar</option>
      </select>
      <div class="row-actions">
        <button type="button" data-action="loadChannels">Recargar canales</button>
      </div>
      <br><br>
      <label for="canalId">ID Canal (manual/respaldo)</label>
      <input id="canalId" placeholder="ID Canal" />
      <input id="webhookUrl" placeholder="URL Webhook" />
      <input id="secret" placeholder="Secret (opcional)" />

      <div class="row-actions">
        <button type="button" data-action="activateWebhook">Activar Proxy</button>
        <button type="button" data-action="deactivateWebhook">Desactivar Proxy</button>
      </div>
      <div id="webhookResult">Sin resultados aún.</div>

      <hr class="section-divider">

      <h3>QuickAnswer</h3>
      <label for="quickAnswerId">ID Respuesta</label>
      <input id="quickAnswerId" placeholder="ID Respuesta" />
      <label for="quickAnswerVariables">Variables (JSON)</label>
      <textarea id="quickAnswerVariables" rows="4" placeholder='{"visitante.nombre":"Juan","pedido.numero":"1234"}'>{}</textarea>
      <div class="row-actions">
        <button type="button" data-action="sendQuickAnswer">Enviar QuickAnswer</button>
      </div>

      <hr class="section-divider">

      <h3>Enviar Archivo</h3>
      <label for="fileUrl">URL Archivo</label>
      <input id="fileUrl" placeholder="https://..." />
      <label for="fileName">Nombre Archivo</label>
      <input id="fileName" placeholder="documento" />
      <label for="fileExtension">Extension</label>
      <select id="fileExtension">
        <option value="">Selecciona extension</option>
        <option value="pdf">pdf</option>
        <option value="jpg">jpg</option>
        <option value="jpeg">jpeg</option>
        <option value="png">png</option>
        <option value="doc">doc</option>
        <option value="docx">docx</option>
        <option value="xls">xls</option>
        <option value="xlsx">xlsx</option>
        <option value="csv">csv</option>
        <option value="txt">txt</option>
      </select>
      <div class="row-actions">
        <button type="button" data-action="sendFile">Enviar Archivo</button>
      </div>

      <hr class="section-divider">

      <h3>Balance</h3>
      <div id="balanceDisplay">No consultado</div>
      <div class="row-actions">
        <button type="button" data-action="consultBalance">Consultar Saldo</button>
      </div>
      <div id="configStatus">Esperando acción.</div>

      <br><br>
      <button id="closeSettingsBtn" type="button" data-action="closeSettings">Cerrar</button>

    </div>
  </div>

  <!-- Conversaciones -->
  <div id="sidebar"></div>

  <!-- Chat -->
  <div id="chat">
    <div id="top-actions">
      <button type="button" data-action="checkBalance">Saldo</button>
      <button type="button" data-action="sendQuickAnswer">QuickAnswer</button>
      <button type="button" data-action="transferConversation">Transferir</button>
    </div>

    <div id="messages"></div>

    <div id="input-box">
      <input id="messageInput" placeholder="Escribe un mensaje..." />
      <button type="button" data-action="sendMessage">Enviar</button>
    </div>
  </div>

<script src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html>
